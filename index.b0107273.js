!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequireae86;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequireae86=i);var o=i("cRoku"),r=i("9tAMN"),l=i("1h2Gi"),c=i("3likm"),s=i("8pYMx"),d=i("dIxxU");i("9tAMN");l=i("1h2Gi"),d=i("dIxxU"),s=i("8pYMx");document.querySelector(".movie-list");async function u(e=1){try{const{data:{results:t}}=await d.default.get(`${l.BASE_URL}/trending/all/day`,{params:{api_key:l.API_KEY,page:e}});return t}catch(e){return e}}async function m(e){const t=await(0,c.getGenres)();return e.map((e=>({title:e.title?e.title:e.name,id:e.id,media_type:e.media_type,image:`${l.IMG_URL+e.poster_path}`,year:new Date(e.first_air_date?e.first_air_date:e.release_date).getFullYear(),genres:e.genre_ids.map(((e,n)=>{var a;return n<2?null===(a=t[e])||void 0===a?void 0:a.name:2===n?"Other":n>2?"":void 0})).filter((e=>""!==e)).join(", ")})))}!async function(){const e=(await async function(e){try{return(await d.default.get(`${l.BASE_URL}/trending/all/day`,{params:{api_key:l.API_KEY,page:e}})).data}catch(e){return e}}(1)).total_pages;let t=1,n=1;const a=document.createElement("button");a.classList.add("arrow-right"),a.innerHTML='<img src="https://img.icons8.com/office/16/null/circled-chevron-right.png"/>';const i=document.createElement("button");function o(e){const t=document.querySelector(".movie-list");t.innerHTML="",u(e).then(m).then((e=>{t.innerHTML=e.map((e=>(0,s.default)(e))).join("")}))}function r(e){const t=document.createElement("li");t.classList.add("pagination__item"),t.innerText=e,n===e&&t.classList.add("pagination__item--active");return t.addEventListener("click",(t=>{n=e,o(n);let a=document.querySelector("li.pagination__item--active");a&&a.classList.remove("pagination__item--active"),t.target.classList.add("pagination__item--active")})),t}i.classList.add("arrow-left"),i.innerHTML='<img src="https://img.icons8.com/office/16/null/circled-chevron-left.png"/>',o(n),function(){const n=document.querySelector(".pagination"),o=document.createElement("ul");let l=10;o.classList.add("pagination__list");for(let e=0;e<l;e++){const t=r(e+1);o.appendChild(t)}n.appendChild(o),o.appendChild(a),a.addEventListener("click",(()=>{if(t+=1,l+=1,o.innerHTML="",o.insertAdjacentElement("afterbegin",i),l<e){for(let e=t;e<=l;e++){const t=r(e);o.appendChild(t)}let e=document.querySelectorAll(".pagination__item");e[0].classList.contains("pagination__item--active")&&(e[0].classList.remove("pagination__item--active"),e[0].classList.add("pagination__item--active"))}l===e&&a.remove(),o.appendChild(a)})),i.addEventListener("click",(()=>{if(t-=1,l-=1,o.innerHTML="",o.insertAdjacentElement("afterbegin",i),l<e){for(let e=t;e<=l;e++){const t=r(e);o.appendChild(t)}let e=document.querySelectorAll(".pagination__item");e[9].classList.contains("pagination__item--active")&&(e[9].classList.remove("pagination__item--active"),e[9].classList.add("pagination__item--active"))}10===l&&i.remove(),o.appendChild(a)}))}()}();var p=i("lgA99"),y=(l=i("1h2Gi"),i("kvC6y"));var v=e(i("WMajR")).template({1:function(e,t,n,a,i){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,c="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option class="options" value='+s(typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:l)===c?o.call(r,{name:"id",hash:{},data:i,loc:{start:{line:2,column:30},end:{line:2,column:36}}}):o)+">"+s(typeof(o=null!=(o=d(n,"name")||(null!=t?d(t,"name"):t))?o:l)===c?o.call(r,{name:"name",hash:{},data:i,loc:{start:{line:2,column:37},end:{line:2,column:45}}}):o)+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:0},end:{line:3,column:9}}}))?o:""},useData:!0}),g=i("1rlbk"),h=(d=i("dIxxU"),l=i("1h2Gi"),s=i("8pYMx"),y=i("kvC6y"),i("6DaBD"));const f=document.querySelector(".movie-list"),_=document.querySelector(".loader-container");document.querySelector(".load-btn");let L={};async function b(e,t,n){try{const{data:a}=await d.default.get(l.BASE_URL+e,{params:{api_key:l.API_KEY,page:t,with_genres:n}});return 0===a.total_pages&&(f.innerHTML='<p class="nothing-p">Nothing to show</p>'),a.total_pages<=1&&document.querySelector(".load-btn").classList.remove("load-btn-visible"),a.total_pages>1&&(0,h.addObserver)(),(a.page===a.total_pages||a.total_pages<=1)&&(0,h.removeObserver)(),a.results}catch(e){console.error(e)}}async function w(e){try{const{data:{genres:t}}=await d.default.get(l.BASE_URL+e,{params:{api_key:l.API_KEY}});return t}catch(e){console.error(e)}}async function S(e){L=await async function(){if(0!==Object.entries(L).length)return L;if(0===Object.entries(L).length){const e=await w("/genre/movie/list");return[...await w("/genre/tv/list"),...e].forEach((e=>L[e.id]=e)),L}}();try{return await e.map((e=>({id:e.id,title:e.title?e.title:e.name,year:e.release_date?new Date(e.release_date?e.release_date:e.first_air_date).getFullYear():"Year unknown",image:e.poster_path?`${l.IMG_URL+e.poster_path}`:"https://www.gulftoday.ae/-/media/gulf-today/images/articles/opinion/2022/8/7/cinema.ashx?h=450&la=en&w=750&hash=EB12327C59FAEB577FBED56AF6BF2E12",overview:e.overview,genres:0===e.genre_ids.length?"Genre unknown":e.genre_ids.map(((e,t)=>t<2?L[e].name:2===t?"Other":t>2?"":void 0)).filter((e=>""!=e)).join(", ")})))}catch(e){console.error(e)}finally{(0,y.removeLoader)(_)}}async function E(e){f.innerHTML+=e.map((e=>(0,s.default)(e))).join("")}g=i("1rlbk"),y=i("kvC6y"),h=i("6DaBD");const q=document.querySelector("input[type='range']"),k=document.querySelector(".bubble"),x=document.querySelector('[name="by-name__select"]'),M=document.querySelector('[name="by-year"]'),T=document.querySelector(".page-heading"),A=document.querySelector(".movie-list"),C=document.querySelector(".loader-container"),$=document.querySelector(".pagination");let H=1;async function I(e){A.innerHTML="",(0,y.addLoader)(C),$.classList.add("visually-hidden"),T.textContent=`Sorted by title(${e}ending)`,D(),(0,g.removeEventListeners)(O);try{await b(`/discover/movie?sort_by=title.${e}`).then(S).then(E)}catch(e){console.log(e)}}async function O(){H+=1,(0,y.addLoader)(C),(0,g.removeBtn)();try{await b(`/discover/movie?sort_by=title.${x.value}`,H).then(S).then(E)}catch(e){console.log(e)}}async function j(e){(0,y.addLoader)(C),$.classList.add("visually-hidden"),(0,h.addObserver)(),A.innerHTML="",T.textContent=`Movies released in ${e}`,(0,g.removeEventListeners)(B);try{await b(`/discover/movie?primary_release_year=${e}`).then(S).then(E)}catch(e){console.log(e)}}async function B(){(0,y.addLoader)(C),H+=1,(0,g.removeBtn)();try{await b(`/discover/movie?primary_release_year=${M.value}`,H).then(S).then(E)}catch(e){console.log(e)}}function D(){document.querySelector(".bubble").style.visibility="hidden"}const U=document.querySelector(".movie-list"),Y=document.querySelector("#by-genre"),P=document.querySelector(".page-heading"),R=document.querySelector(".loader-container"),G=document.querySelector(".pagination");let F=1;async function N(){return await async function(){const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${l.API_KEY}`);if(e.ok)return await e.json();throw new Error(await e.text())}()}async function K(e){U.innerHTML="",(0,y.addLoader)(R),G.classList.add("visually-hidden"),P.textContent=`Movies of the ${Y.options[Y.selectedIndex].textContent} genre`,D(),(0,g.removeEventListeners)(W);try{await b(`/discover/movie?sort_by=title.&with_genres=${e}`).then(S).then(E)}catch(e){console.log(e)}}async function W(){F+=1,(0,y.addLoader)(R),(0,g.removeBtn)();try{await b(`/discover/movie?sort_by=title.&with_genres=${Y.value}`,F).then(S).then(E)}catch(e){console.log(e)}}!async function(){const e=(await N()).genres.map((e=>e));e.push({});const t=e.map((e=>v({el:e})));Y.innerHTML="",Y.insertAdjacentHTML("beforeend",t)}();var z;function J(e,t,n){var a,i,o,r,l;function c(){var s=Date.now()-r;s<t&&s>=0?a=setTimeout(c,t-s):(a=null,n||(l=e.apply(o,i),o=i=null))}null==t&&(t=100);var s=function(){o=this,i=arguments,r=Date.now();var s=n&&!a;return a||(a=setTimeout(c,t)),s&&(l=e.apply(o,i),o=i=null),l};return s.clear=function(){a&&(clearTimeout(a),a=null)},s.flush=function(){a&&(l=e.apply(o,i),o=i=null,clearTimeout(a),a=null)},s}J.debounce=J,z=J,(0,o.getCurrentPage)(),(0,r.AddListenerToMovieList)();document.querySelector(".search-form").addEventListener("submit",p.onSubmit),null!==localStorage.getItem("theme")&&document.body.classList.add("dark");document.querySelector('[data-theme ="dark"]').addEventListener("click",(function(){document.body.classList.add("dark"),localStorage.setItem("theme","dark")}));document.querySelector('[data-theme ="light"]').addEventListener("click",(function(){document.body.classList.remove("dark"),localStorage.removeItem("theme")}));const Q=document.querySelector("#by-genre");Q.addEventListener("change",(()=>{K(Q.value)}));const V=document.querySelector('[name="by-name__select"]');V.addEventListener("change",(()=>{I(V.value)}));const X=document.querySelector('[name="by-year"]');X.addEventListener("input",(function(){k.style.visibility="visible";const e=q.value,t=q.min?q.min:0,n=q.max?q.max:100,a=Number(100*(e-t)/(n-t));k.innerHTML=e,k.style.left=`calc(${a}% + (${8-.15*a}px))`})),X.addEventListener("change",e(z)((()=>{j(X.value)}),300))}();
//# sourceMappingURL=index.b0107273.js.map
