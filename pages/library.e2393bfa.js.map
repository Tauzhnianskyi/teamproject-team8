{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,kDAOwC,OAAlCC,aAAaC,QAAQ,SACvBC,SAASC,KAAKC,UAAUC,IAAI,QAE5BH,SAASC,KAAKC,UAAUE,OAAO,SAKnC,EAAAC,EAAAC,kBAEA,MAAMC,EAAWC,KAAKC,MAAMX,aAAaC,QAAQ,gBAE3CW,EAAU,CACdC,QAAS,CACP,eAAgB,qBAIpBJ,EAASK,SAAQC,IAMV,IAA2BC,IALdD,EAMXE,MAAM,GAAGnB,EAAAoB,kBAAkBF,aAAoBlB,EAAAqB,UAAWP,GAC9DQ,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,QAElB,OAAOF,EAASG,MAAM,IAEvBJ,MAAKK,IACJ,MAAMC,EAAuBxB,SAASyB,cAAc,MACpDD,EAAqBtB,UAAUC,IAAI,cACnCqB,EAAqBE,UAAY,oBACtBH,EAAKI,aAAaJ,EAAKI,0CACxB/B,EAAAgC,UAAUL,EAAKM,0GAEAN,EAAKO,0DACCP,EAAKQ,OACjCC,KAAIC,GAAQ,GAAGA,EAAKC,SACpBC,KAAK,WAAWZ,EAAKa,+CAIxBC,EAAYC,YAAYd,EAAqB,GA3BvB,IAG5B,MAAMa,EAAcrC,SAASuC,cAAc,eA2B3C,MAAMC,EAAqBxC,SAASuC,cAAc,qBAC5CE,EAAsBzC,SAASuC,cAAc,eAE7CG,EAAmB1C,SAAS2C,eAChC,mCAEFD,EAAiBE,iBAAiB,SAASC,IACzCA,EAAEC,iBACFJ,EAAiBK,UAAW,EAC5BN,EAAoBO,MAAMC,QAAU,OACpCT,EAAmBQ,MAAMC,QAAU,OACnCC,EAAkBH,UAAW,CAAK,IAGpC,MAAMG,EAAoBlD,SAAS2C,eACjC,qCAGFO,EAAkBN,iBAAiB,SAASC,IAC1CA,EAAEC,iBACFI,EAAkBH,UAAW,EAC7BP,EAAmBQ,MAAMC,QAAU,OACnCR,EAAoBO,MAAMC,QAAU,OACpCP,EAAiBK,UAAW,CAAK","sources":["src/js/library.js"],"sourcesContent":["import { API_KEY, BASE_URL, IMG_URL } from './api-service';\nimport movieCardTpl from './../templates/movie-card.hbs';\nimport { getCurrentPage } from './getCurrentPage';\nimport { openModal } from './modal-movie';\nimport { fetchInitialData } from './renderHomePageUI';\n\nfunction storageLibraryChecker() {\n  if (localStorage.getItem('theme') !== null) {\n    document.body.classList.add('dark');\n  } else {\n    document.body.classList.remove('dark');\n  }\n}\nstorageLibraryChecker();\n\ngetCurrentPage();\n\nconst movie_id = JSON.parse(localStorage.getItem('WatchedList'));\n\nconst options = {\n  headers: {\n    'Content-Type': 'application/json',\n  },\n};\n\nmovie_id.forEach(element => {\n  apiLibraryWatched(element);\n});\n\nconst watchedList = document.querySelector('.movie-list');\n\nexport function apiLibraryWatched(movie_id) {\n  return fetch(`${BASE_URL}/movie/${movie_id}?api_key=${API_KEY}`, options)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('fail');\n      }\n      return response.json();\n    })\n    .then(data => {\n      const libraryWatchedListEl = document.createElement('li');\n      libraryWatchedListEl.classList.add('movie-item');\n      libraryWatchedListEl.innerHTML = `\n      <a href='${data.id}' id = '${data.id}' class='movie-link'>\n    <img src='${IMG_URL}${data.poster_path}' alt='' class='movie-image' />\n    <div class='movie-info'>\n      <p class='movie-title'>${data.original_title}</p>\n      <p class='movie-description'>${data.genres\n        .map(elem => `${elem.name}`)\n        .join(', ')} | ${data.release_date}</p>\n    </div>\n  </a>\n      `;\n      watchedList.appendChild(libraryWatchedListEl);\n    });\n}\nconst queuedListForClick = document.querySelector('.movie-list-queue');\nconst watchedListForClick = document.querySelector('.movie-list');\n\nconst queuedBtnLibrary = document.getElementById(\n  'js-navigationLibraryButtonQueue'\n);\nqueuedBtnLibrary.addEventListener('click', e => {\n  e.preventDefault();\n  queuedBtnLibrary.disabled = true;\n  watchedListForClick.style.display = 'none';\n  queuedListForClick.style.display = 'flex';\n  watchedBtnLibrary.disabled = false;\n});\n\nconst watchedBtnLibrary = document.getElementById(\n  'js-navigationLibraryButtonWatched'\n);\n\nwatchedBtnLibrary.addEventListener('click', e => {\n  e.preventDefault();\n  watchedBtnLibrary.disabled = true;\n  queuedListForClick.style.display = 'none';\n  watchedListForClick.style.display = 'flex';\n  queuedBtnLibrary.disabled = false;\n});\n"],"names":["$7me8F","parcelRequire","localStorage","getItem","document","body","classList","add","remove","$baSj9","getCurrentPage","$1cafa503bc57b7a0$var$movie_id","JSON","parse","$1cafa503bc57b7a0$var$options","headers","forEach","element","movie_id","fetch","BASE_URL","API_KEY","then","response","ok","Error","json","data","libraryWatchedListEl","createElement","innerHTML","id","IMG_URL","poster_path","original_title","genres","map","elem","name","join","release_date","$1cafa503bc57b7a0$var$watchedList","appendChild","querySelector","$1cafa503bc57b7a0$var$queuedListForClick","$1cafa503bc57b7a0$var$watchedListForClick","$1cafa503bc57b7a0$var$queuedBtnLibrary","getElementById","addEventListener","e","preventDefault","disabled","style","display","$1cafa503bc57b7a0$var$watchedBtnLibrary"],"version":3,"file":"library.e2393bfa.js.map"}