{"mappings":"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","sources":["src/js/index.js","src/js/renderHomePageUI.js","src/js/pagination-homepage.js","src/js/filter.js","src/templates/options.hbs","src/js/newDataFetchFunction.js","src/js/homePageSorting.js","node_modules/debounce/index.js","src/js/changeTheme.js"],"sourcesContent":["import { getCurrentPage } from './getCurrentPage';\nimport { AddListenerToMovieList } from './modal-movie';\nimport { renderUI } from './renderHomePageUI';\nimport { onSubmit } from './searchinputLogic';\nimport { filterByGenres } from './filter';\n\nimport { becomeDark } from './changeTheme';\nimport { becomeLight } from './changeTheme';\nimport { storageChecker } from './changeTheme';\n\nimport { byName, byYear, setBubble } from './homePageSorting';\n\nimport debounce from 'debounce';\n\n// Adds a red line under active page in the website header\ngetCurrentPage();\n\n// UI render invocation\n// renderUI();\n\n// searchInputLogic();\n\n// Add modal-movie\nAddListenerToMovieList();\n\n// searchInputLogic\nconst searchForm = document.querySelector('.search-form');\nsearchForm.addEventListener('submit', onSubmit);\n\n// change themes\nstorageChecker();\nconst dark = document.querySelector('[data-theme =\"dark\"]');\ndark.addEventListener('click', becomeDark);\nconst light = document.querySelector('[data-theme =\"light\"]');\nlight.addEventListener('click', becomeLight);\n\n// filter by genre\nconst select = document.querySelector('#by-genre');\nselect.addEventListener('change', () => {\n  filterByGenres(select.value);\n});\n\n// sort by name\nconst byNameSelect = document.querySelector('[name=\"by-name__select\"]');\nbyNameSelect.addEventListener('change', () => {\n  byName(byNameSelect.value);\n});\n\n// filter by year\nconst byYearInput = document.querySelector('[name=\"by-year\"]');\nbyYearInput.addEventListener('input', setBubble);\n\nbyYearInput.addEventListener(\n  'change',\n  debounce(() => {\n    byYear(byYearInput.value);\n  }, 300)\n);\n","import { API_KEY, BASE_URL, IMG_URL } from './api-service';\nimport { getGenres } from './fetchGenres';\nimport movieCardTpl from './../templates/movie-card.hbs';\nimport axios from 'axios';\nimport { openModal } from './modal-movie';\nimport { renderPages } from './pagination-homepage';\n\nconst moviesList = document.querySelector('.movie-list');\n// export const guard = document.querySelector('.guard');\n// const options = {\n//   root: null,\n//   rootMargin: '50px',\n//   threshold: 1,\n// };\n// export const observer = new IntersectionObserver(renderUI, options);\nlet page = 1;\n\nexport async function fetchInitialData(page = 1) {\n  try {\n    const {\n      data: { results },\n    } = await axios.get(`${BASE_URL}/trending/all/day`, {\n      params: {\n        api_key: API_KEY,\n        page: page,\n      },\n    });\n\n    return results;\n  } catch (err) {\n    return err;\n  }\n}\n\nexport async function convertResponseDataToObject(results) {\n  const genresDictionary = await getGenres();\n  return results.map(elem => {\n    return {\n      title: elem.title ? elem.title : elem.name,\n      id: elem.id,\n      media_type: elem.media_type,\n      image: `${IMG_URL + elem.poster_path}`,\n      year: new Date(\n        elem.first_air_date ? elem.first_air_date : elem.release_date\n      ).getFullYear(),\n      genres: elem.genre_ids\n        .map((genreId, index) => {\n          if (index < 2) {\n            return genresDictionary[genreId]?.name;\n          }\n          if (index === 2) {\n            return 'Other';\n          }\n          if (index > 2) {\n            return '';\n          }\n        })\n        .filter(elem => elem !== '')\n        .join(', '),\n    };\n  });\n}\n\nexport async function renderUI() {\n  fetchInitialData(page)\n    .then(convertResponseDataToObject)\n    .then(data => {\n      // if (page > 1) {\n      //   moviesList.insertAdjacentHTML(\n      //     'beforeend',\n      //     data.map(elem => movieCardTpl(elem)).join('')\n      //   );\n      // } else {\n      //   moviesList.innerHTML = data.map(elem => movieCardTpl(elem)).join('');\n      // }\n      moviesList.innerHTML = data.map(elem => movieCardTpl(elem)).join('');\n      // observer.observe(guard); // двоит респ и разметку\n\n      // observer.observe(guard);\n      // page += 1;\n    });\n}\n\nrenderPages();\n","import { API_KEY, BASE_URL } from './api-service';\nimport axios from 'axios';\nimport movieCardTpl from './../templates/movie-card.hbs';\nimport {\n  fetchInitialData,\n  convertResponseDataToObject,\n} from './renderHomePageUI';\n\nlet page = 1;\nasync function getData(page) {\n  try {\n    const response = await axios.get(`${BASE_URL}/trending/all/day`, {\n      params: {\n        api_key: API_KEY,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (err) {\n    return err;\n  }\n}\n\nexport async function renderPages() {\n  const filmData = await getData(page);\n  const totalPages = filmData.total_pages;\n\n  let initialPageNumber = 1;\n  let currentPageNumber = 1;\n\n  const arrowRightBtn = document.createElement('button');\n  arrowRightBtn.classList.add('arrow-right');\n  arrowRightBtn.innerHTML =\n    '<img src=\"https://img.icons8.com/office/16/null/circled-chevron-right.png\"/>';\n\n  const arrowLeftBtn = document.createElement('button');\n  arrowLeftBtn.classList.add('arrow-left');\n  arrowLeftBtn.innerHTML =\n    '<img src=\"https://img.icons8.com/office/16/null/circled-chevron-left.png\"/>';\n\n  function displayFilmsList(page) {\n    const moviesList = document.querySelector('.movie-list');\n    moviesList.innerHTML = '';\n\n    fetchInitialData(page)\n      .then(convertResponseDataToObject)\n      .then(data => {\n        moviesList.innerHTML = data.map(elem => movieCardTpl(elem)).join('');\n      });\n  }\n\n  function displayPagination() {\n    const paginationEl = document.querySelector('.pagination');\n    const ulEl = document.createElement('ul');\n    let pagesCount = 10;\n    ulEl.classList.add('pagination__list');\n\n    for (let i = 0; i < pagesCount; i++) {\n      const liEl = displayPaginationBtn(i + 1);\n      ulEl.appendChild(liEl);\n    }\n    paginationEl.appendChild(ulEl);\n    ulEl.appendChild(arrowRightBtn);\n\n    const arrowRightClick = () => {\n      initialPageNumber += 1;\n      pagesCount += 1;\n      ulEl.innerHTML = '';\n      ulEl.insertAdjacentElement('afterbegin', arrowLeftBtn);\n\n      if (pagesCount < totalPages) {\n        for (let i = initialPageNumber; i <= pagesCount; i++) {\n          const liEl = displayPaginationBtn(i);\n\n          ulEl.appendChild(liEl);\n        }\n\n        let liArrPlus = document.querySelectorAll('.pagination__item');\n\n        if (liArrPlus[0].classList.contains('pagination__item--active')) {\n          liArrPlus[0].classList.remove('pagination__item--active');\n          liArrPlus[0].classList.add('pagination__item--active');\n        }\n      }\n\n      if (pagesCount === totalPages) {\n        arrowRightBtn.remove();\n      }\n\n      ulEl.appendChild(arrowRightBtn);\n    };\n\n    arrowRightBtn.addEventListener('click', arrowRightClick);\n\n    const arrowLeftClick = () => {\n      initialPageNumber -= 1;\n      pagesCount -= 1;\n      ulEl.innerHTML = '';\n      ulEl.insertAdjacentElement('afterbegin', arrowLeftBtn);\n\n      if (pagesCount < totalPages) {\n        for (let i = initialPageNumber; i <= pagesCount; i++) {\n          const liEl = displayPaginationBtn(i);\n          ulEl.appendChild(liEl);\n        }\n\n        let liArrMinus = document.querySelectorAll('.pagination__item');\n        if (liArrMinus[9].classList.contains('pagination__item--active')) {\n          liArrMinus[9].classList.remove('pagination__item--active');\n          liArrMinus[9].classList.add('pagination__item--active');\n        }\n      }\n\n      if (pagesCount === 10) {\n        arrowLeftBtn.remove();\n      }\n\n      ulEl.appendChild(arrowRightBtn);\n    };\n\n    arrowLeftBtn.addEventListener('click', arrowLeftClick);\n  }\n  function displayPaginationBtn(page) {\n    const liEl = document.createElement('li');\n    liEl.classList.add('pagination__item');\n    liEl.innerText = page;\n\n    if (currentPageNumber === page) {\n      liEl.classList.add('pagination__item--active');\n    }\n\n    const handleCkickPage = evt => {\n      currentPageNumber = page;\n      displayFilmsList(currentPageNumber);\n\n      let currentItemLi = document.querySelector('li.pagination__item--active');\n      if (currentItemLi) {\n        currentItemLi.classList.remove('pagination__item--active');\n      }\n\n      evt.target.classList.add('pagination__item--active');\n    };\n    liEl.addEventListener('click', handleCkickPage);\n\n    return liEl;\n  }\n\n  displayFilmsList(currentPageNumber);\n  displayPagination();\n}\n","import { API_KEY } from './api-service';\nimport { addLoader } from './loader';\nimport options from './../templates/options.hbs';\nimport { removeEventListeners, removeBtn } from './removeBtnEventlisteners';\nimport {\n  fetchData,\n  formatResponseData,\n  renderUI,\n} from './newDataFetchFunction';\nimport { removeBubble } from './homePageSorting';\nconst moviesList = document.querySelector('.movie-list');\nconst select = document.querySelector('#by-genre');\nconst title = document.querySelector('.page-heading');\nconst loaderContainer = document.querySelector('.loader-container');\nconst pagination = document.querySelector('.pagination');\n\nlet page = 1;\n\nasync function getOptions() {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`\n  );\n  if (response.ok) {\n    return await response.json();\n  }\n  throw new Error(await response.text());\n}\n\nasync function getOptionsGenres() {\n  const genres = await getOptions();\n  return genres;\n}\n\nexport async function generateOptions() {\n  let emptyObj = {};\n\n  const dataForGenerationOfOptions = await getOptionsGenres();\n\n  const array = dataForGenerationOfOptions.genres.map(el => el);\n  array.push(emptyObj);\n  const markup = array.map(el => options({ el }));\n  select.innerHTML = '';\n  select.insertAdjacentHTML('beforeend', markup);\n}\n\ngenerateOptions();\n\nexport async function filterByGenres(genre) {\n  moviesList.innerHTML = '';\n  addLoader(loaderContainer);\n  pagination.classList.add('visually-hidden');\n  title.textContent = `Movies of the ${\n    select.options[select.selectedIndex].textContent\n    } genre`;\n  removeBubble();\n  removeEventListeners(seeMoreByGenre);\n  try {\n    await fetchData(`/discover/movie?sort_by=title.&with_genres=${genre}`)\n      .then(formatResponseData)\n      .then(renderUI);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function seeMoreByGenre() {\n  page += 1;\n  addLoader(loaderContainer);\n  removeBtn();\n  try {\n    await fetchData(`/discover/movie?sort_by=title.&with_genres=${select.value}`, page)\n      .then(formatResponseData)\n      .then(renderUI);\n  } catch (error) {\n    console.log(error);\n  }\n}\n","{{#each this}}\n<option class=\"options\" value={{id}}>{{name}}</option>\n{{/each}}","import axios from 'axios';\nimport { API_KEY, BASE_URL, IMG_URL } from './api-service';\nimport movieCardTpl from './../templates/movie-card.hbs';\nimport { removeLoader } from './loader';\nimport { addObserver, removeObserver } from './intersectionObserver';\n\nconst movieListEl = document.querySelector('.movie-list');\nconst loaderContainer = document.querySelector('.loader-container');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst defaultImg =\n  'https://www.gulftoday.ae/-/media/gulf-today/images/articles/opinion/2022/8/7/cinema.ashx?h=450&la=en&w=750&hash=EB12327C59FAEB577FBED56AF6BF2E12';\nconst defaultYear = 'Year unknown';\nconst defaultGenre = 'Genre unknown';\n\nlet genresDictionary = {};\n\nexport async function fetchData(endpoint, page, genres) {\n  try {\n    const { data } = await axios.get(BASE_URL + endpoint, {\n      params: {\n        api_key: API_KEY,\n        page: page,\n        with_genres: genres,\n      },\n    });\n    if (data.total_pages === 0) {\n      movieListEl.innerHTML = '<p class=\"nothing-p\">Nothing to show</p>';\n    }\n    if (data.total_pages <= 1) {\n      document.querySelector('.load-btn').classList.remove('load-btn-visible');\n    }\n    if (data.total_pages > 1) {\n      addObserver();\n    }\n    if (data.page === data.total_pages || data.total_pages <= 1) {\n      removeObserver();\n    }\n    return data.results;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nexport async function fetchGenres(endpoint) {\n  try {\n    const {\n      data: { genres },\n    } = await axios.get(BASE_URL + endpoint, {\n      params: {\n        api_key: API_KEY,\n      },\n    });\n    return genres;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nasync function composeGenresDictionary() {\n  if (Object.entries(genresDictionary).length !== 0) {\n    return genresDictionary;\n  }\n  if (Object.entries(genresDictionary).length === 0) {\n    const movieGenres = await fetchGenres('/genre/movie/list');\n    const tvGenres = await fetchGenres('/genre/tv/list');\n    [...tvGenres, ...movieGenres].forEach(\n      elem => (genresDictionary[elem.id] = elem)\n    );\n    return genresDictionary;\n  }\n}\n\nexport async function formatResponseData(results) {\n  genresDictionary = await composeGenresDictionary();\n  try {\n    const processedObject = await results.map(elem => {\n      return {\n        id: elem.id,\n        title: elem.title ? elem.title : elem.name,\n        year: elem.release_date\n          ? new Date(\n              elem.release_date ? elem.release_date : elem.first_air_date\n            ).getFullYear()\n          : defaultYear,\n        image: elem.poster_path ? `${IMG_URL + elem.poster_path}` : defaultImg,\n        overview: elem.overview,\n        genres:\n          elem.genre_ids.length === 0\n            ? defaultGenre\n            : elem.genre_ids\n                .map((elem, index) => {\n                  if (index < 2) {\n                    return genresDictionary[elem].name;\n                  }\n                  if (index === 2) {\n                    return 'Other';\n                  }\n                  if (index > 2) {\n                    return '';\n                  }\n                })\n                .filter(elem => elem != '')\n                .join(', '),\n      };\n    });\n\n    return processedObject;\n  } catch (err) {\n    console.error(err);\n  } finally {\n    removeLoader(loaderContainer);\n  }\n}\n\nexport async function renderUI(data) {\n  movieListEl.innerHTML += data.map(elem => movieCardTpl(elem)).join('');\n}\n\n// EXAMPLE OF HOW TO RENDER UI\n\n// fetchData('/discover/movie', 1, '16').then(formatResponseData).then(renderUI);\n","import {\n  fetchData,\n  formatResponseData,\n  renderUI,\n} from './newDataFetchFunction';\n\nimport { removeEventListeners, removeBtn } from './removeBtnEventlisteners';\nimport { addLoader } from './loader';\nimport { addObserver } from './intersectionObserver';\n\nconst range = document.querySelector(\"input[type='range']\");\nconst bubble = document.querySelector('.bubble');\nconst byNameSelect = document.querySelector('[name=\"by-name__select\"]');\nconst byYearInput = document.querySelector('[name=\"by-year\"]');\nconst title = document.querySelector('.page-heading');\nconst movieListEl = document.querySelector('.movie-list');\nconst loaderContainer = document.querySelector('.loader-container');\nconst pagination = document.querySelector('.pagination');\n\nlet page = 1;\n\nexport async function byName(value) {\n  movieListEl.innerHTML = '';\n  addLoader(loaderContainer);\n  pagination.classList.add('visually-hidden');\n  title.textContent = `Sorted by title(${value}ending)`;\n  removeBubble();\n  removeEventListeners(seeMoreByName);\n  try {\n    await fetchData(`/discover/movie?sort_by=title.${value}`)\n      .then(formatResponseData)\n      .then(renderUI);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function seeMoreByName() {\n  page += 1;\n  addLoader(loaderContainer);\n  removeBtn();\n  try {\n    await fetchData(`/discover/movie?sort_by=title.${byNameSelect.value}`, page)\n      .then(formatResponseData)\n      .then(renderUI);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function byYear(year) {\n  addLoader(loaderContainer);\n  pagination.classList.add('visually-hidden');\n  addObserver();\n  movieListEl.innerHTML = '';\n  title.textContent = `Movies released in ${year}`;\n  removeEventListeners(seeMoreByYear);\n  try {\n    await fetchData(`/discover/movie?primary_release_year=${year}`)\n      .then(formatResponseData)\n      .then(renderUI);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function seeMoreByYear() {\n  addLoader(loaderContainer);\n  page += 1;\n  removeBtn();\n  try {\n    await fetchData(\n      `/discover/movie?primary_release_year=${byYearInput.value}`,\n      page\n    )\n      .then(formatResponseData)\n      .then(renderUI);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function setBubble() {\n  bubble.style.visibility = 'visible';\n  const val = range.value;\n  const min = range.min ? range.min : 0;\n  const max = range.max ? range.max : 100;\n  const newVal = Number(((val - min) * 100) / (max - min));\n  bubble.innerHTML = val;\n  bubble.style.left = `calc(${newVal}% + (${8 - newVal * 0.15}px))`;\n}\n\nexport function removeBubble() {\n  const bubble = document.querySelector('.bubble');\n  bubble.style.visibility = 'hidden';\n}","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","export function becomeDark() {\n  document.body.classList.add('dark');\n  localStorage.setItem('theme', 'dark');\n}\nexport function becomeLight() {\n  document.body.classList.remove('dark');\n  localStorage.removeItem('theme');\n}\nexport function storageChecker() {\n  if (localStorage.getItem('theme') !== null)\n    document.body.classList.add('dark');\n}\n"],"names":["$baSj9","parcelRequire","$7me8F","document","querySelector","async","$5b78a64c99a9731f$export$3f11586208dd5b5c","page","data","results","$2shzp","default","get","BASE_URL","params","api_key","API_KEY","err","$5b78a64c99a9731f$export$84f848cc2352a6b8","genresDictionary","$7zQK0","getGenres","map","elem","title","name","id","media_type","image","IMG_URL","poster_path","year","Date","first_air_date","release_date","getFullYear","genres","genre_ids","genreId","index","filter","join","totalPages","$8b9a97ef5526ccdb$var$getData","total_pages","initialPageNumber","currentPageNumber","arrowRightBtn","createElement","classList","add","innerHTML","arrowLeftBtn","displayFilmsList","moviesList","then","$2gAtb","displayPaginationBtn","liEl","innerText","addEventListener","evt","currentItemLi","remove","target","paginationEl","ulEl","pagesCount","i","appendChild","insertAdjacentElement","liArrPlus","querySelectorAll","contains","liArrMinus","displayPagination","$dac0b969cb541434$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","$ac70133c2b2afdd0$var$movieListEl","$ac70133c2b2afdd0$var$loaderContainer","$ac70133c2b2afdd0$var$genresDictionary","$ac70133c2b2afdd0$export$8134c072fddab6a5","endpoint","with_genres","$6djQB","addObserver","removeObserver","console","error","$ac70133c2b2afdd0$export$e95d448b93b2cdb","$ac70133c2b2afdd0$export$a3af4b9e272e7a4b","entries","length","movieGenres","forEach","$ac70133c2b2afdd0$var$composeGenresDictionary","overview","$gjiCh","removeLoader","$ac70133c2b2afdd0$export$c8a83b1203be5967","$11488c46646a30bc$var$range","$11488c46646a30bc$var$bubble","$11488c46646a30bc$var$byNameSelect","$11488c46646a30bc$var$byYearInput","$11488c46646a30bc$var$title","$11488c46646a30bc$var$movieListEl","$11488c46646a30bc$var$loaderContainer","$11488c46646a30bc$var$pagination","$11488c46646a30bc$var$page","$11488c46646a30bc$export$b7966f2da297eab6","value","addLoader","textContent","$11488c46646a30bc$export$e96de3ed7e9c86d7","$7JQzR","removeEventListeners","$11488c46646a30bc$var$seeMoreByName","log","removeBtn","$11488c46646a30bc$export$2601db731ef982","$11488c46646a30bc$var$seeMoreByYear","style","visibility","$cc8167df025acb14$var$moviesList","$cc8167df025acb14$var$select","$cc8167df025acb14$var$title","$cc8167df025acb14$var$loaderContainer","$cc8167df025acb14$var$pagination","$cc8167df025acb14$var$page","$cc8167df025acb14$var$getOptionsGenres","response","fetch","ok","json","Error","text","$cc8167df025acb14$var$getOptions","$cc8167df025acb14$export$27610e3a38d9265c","genre","options","selectedIndex","$cc8167df025acb14$var$seeMoreByGenre","array","el","push","markup","insertAdjacentHTML","$cc8167df025acb14$export$c21133b4499f5374","$815ad92c071f8c63$var$debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","now","setTimeout","apply","debounced","this","arguments","callNow","clear","clearTimeout","flush","debounce","$815ad92c071f8c63$exports","getCurrentPage","$j3p24","AddListenerToMovieList","$3HWqg","onSubmit","localStorage","getItem","body","setItem","removeItem","$85a5f86b715fe7db$var$select","$85a5f86b715fe7db$var$byNameSelect","$85a5f86b715fe7db$var$byYearInput","val","min","max","newVal","Number","left"],"version":3,"file":"index.677a3eb6.js.map"}